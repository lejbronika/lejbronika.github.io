
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/howto/create_linux_live_usb/">
      
      <link rel="icon" href="../../media/identity/endless-favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.13">
    
    
      
        <title>Create Linux Live-usb - lejbronika</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e411adfe.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../style/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-linux-live-usb" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="lejbronika" class="md-header__button md-logo" aria-label="lejbronika" data-md-component="logo">
      
  <img src="../../media/identity/endless-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lejbronika
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Create Linux Live-usb
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../meltyminds/" class="md-tabs__link">
        Melty Minds
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../arkenstone/" class="md-tabs__link">
        Arkenstone
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        How To
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../notes/" class="md-tabs__link">
        Notes
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="lejbronika" class="md-nav__button md-logo" aria-label="lejbronika" data-md-component="logo">
      
  <img src="../../media/identity/endless-logo.png" alt="logo">

    </a>
    lejbronika
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../..">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../tags/" class="md-nav__link">
        Tags
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../meltyminds/">Melty Minds</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Melty Minds" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Melty Minds
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/manuals_msla_print/" class="md-nav__link">
        Инструкция оператора MSLA-принтера
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/machines_general/" class="md-nav__link">
        Общие заметки по сборке, прошивке и калибровке FDM-принтеров
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/machines_r2d2_log/" class="md-nav__link">
        Melty Modifications Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/machines_black_widow_log/" class="md-nav__link">
        Black Widow Modifications Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/projects_smartable/" class="md-nav__link">
        Rotary table for 3D photography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/projects_freeplaytech_rpi0w_gba/" class="md-nav__link">
        Freeplaytech RPi0W Game Boy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/articles_ru_choosing_cad_software_formlabs/" class="md-nav__link">
        Гайд по выбору CAD-программы от Formlabs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/articles_ru_design_parts_for_sla_printing/" class="md-nav__link">
        Разработка дизайна деталей для SLA 3D-печати
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/notes_gcode/" class="md-nav__link">
        G-code Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../meltyminds/notes_prusa_slicer/" class="md-nav__link">
        Notes prusa slicer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../arkenstone/">Arkenstone</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Arkenstone" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Arkenstone
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/get_on_board/" class="md-nav__link">
        Знакомство с проектом
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/arc_codestyle/" class="md-nav__link">
        Стиль кода
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/arc_structure/" class="md-nav__link">
        Структура папок
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/arc_schema/" class="md-nav__link">
        Cхемы проекта
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/branch_policy/" class="md-nav__link">
        Правила наименования веток
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../arkenstone/best_practices/" class="md-nav__link">
        Лучшие практики работы с django
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">How To</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="How To" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          How To
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Create Linux Live-usb
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Create Linux Live-usb
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-and-verify-linux-iso" class="md-nav__link">
    Download and verify linux .iso
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-live-usb" class="md-nav__link">
    Create Live-usb
  </a>
  
    <nav class="md-nav" aria-label="Create Live-usb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#easy-way-dd" class="md-nav__link">
    Easy way -dd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-way" class="md-nav__link">
    Manual way
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-should-work-for-both-uefi-and-bios" class="md-nav__link">
    Why this should work for both UEFI and BIOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-persistence-to-live-usb" class="md-nav__link">
    Add persistence to Live-usb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-persistence-with-luks-encryption-to-live-usb" class="md-nav__link">
    Add persistence with LUKS encryption to Live-usb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-new-partition-with-fdisk" class="md-nav__link">
    Create new partition with fdisk 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting 
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sphinx_to_gh_pages_eng/" class="md-nav__link">
        Publish sphinx-generated docs on GitHub Pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sphinx_to_gh_pages_rus/" class="md-nav__link">
        Публикация sphinx-документации на GitHub Pages
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../notes/">Notes</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes/win_notes/" class="md-nav__link">
        Windows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes/linux_notes/" class="md-nav__link">
        Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes/git_notes/" class="md-nav__link">
        GIT
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-and-verify-linux-iso" class="md-nav__link">
    Download and verify linux .iso
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-live-usb" class="md-nav__link">
    Create Live-usb
  </a>
  
    <nav class="md-nav" aria-label="Create Live-usb">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#easy-way-dd" class="md-nav__link">
    Easy way -dd
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-way" class="md-nav__link">
    Manual way
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-this-should-work-for-both-uefi-and-bios" class="md-nav__link">
    Why this should work for both UEFI and BIOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-persistence-to-live-usb" class="md-nav__link">
    Add persistence to Live-usb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-persistence-with-luks-encryption-to-live-usb" class="md-nav__link">
    Add persistence with LUKS encryption to Live-usb
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-new-partition-with-fdisk" class="md-nav__link">
    Create new partition with fdisk 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    Troubleshooting 
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  



<h1 id="create-linux-live-usb">Create Linux Live-usb<a class="headerlink" href="#create-linux-live-usb" title="Permanent link">#</a></h1>
<h2 id="download-and-verify-linux-iso">Download and verify linux <code>.iso</code><a class="headerlink" href="#download-and-verify-linux-iso" title="Permanent link">#</a></h2>
<ul>
<li>Download kali:
<div class="highlight"><pre><span></span><code>wget https://archive.kali.org/kali-images/kali-2022.1/kali-linux-2021.1-live-amd64.iso
</code></pre></div></li>
<li>Download and import public GPG key:
<div class="highlight"><pre><span></span><code>wget -q -O - https://archive.kali.org/archive-key.asc | gpg --import

gpg --keyserver hkps://keys.openpgp.org --recv-key
</code></pre></div></li>
<li>Extract fingerprint and get ISO SHASUMS:
<div class="highlight"><pre><span></span><code>gpg --fingerprint KEY_FROM_PREVIOUS_STEP

wget https://archive.kali.org/kali-images/kali-2022.1/SHA256SUMS

wget https://archive.kali.org/kali-images/kali-2022.1/SHA256SUMS.gpg
</code></pre></div></li>
<li>Verify signature to ensure SHA256SUMS is authentic:
<div class="highlight"><pre><span></span><code>gpg --verify SHA256SUMS.gpg SHA256SUMS
</code></pre></div>
Result (<em>ignore warnings</em>): <code>"Good signature from "Kali Linux Repository (devel@kali.org)"</code></li>
<li>Generate ISO SHASUM:
<div class="highlight"><pre><span></span><code>shasum -a 256 ./kali-linux-2022.1-live-amd64.iso
</code></pre></div></li>
<li>Search for SHASUMS for downloaded version and compare them with generated on previous step:
<div class="highlight"><pre><span></span><code>grep kali-linux-2020.3-live-amd64 SHA256SUMS
</code></pre></div></li>
</ul>
<h2 id="create-live-usb">Create Live-usb<a class="headerlink" href="#create-live-usb" title="Permanent link">#</a></h2>
<h3 id="easy-way-dd">Easy way -<code>dd</code><a class="headerlink" href="#easy-way-dd" title="Permanent link">#</a></h3>
<ul>
<li>Find attached device with <code>dmesg</code>.</li>
<li>Write ISO:
<div class="highlight"><pre><span></span><code>dd if=kali-linux-2022.1-live-amd64.iso of=/dev/sdb bs=1M status=progress
</code></pre></div></li>
<li>Create and format additional partition. Verify with <code>lsblk</code>:
<div class="highlight"><pre><span></span><code>usb=/dev/sdb

fdisk $usb &lt;&lt;&lt; $(printf &quot;n\np\n\n\n\nw&quot;)
</code></pre></div></li>
</ul>
<h3 id="manual-way">Manual way<a class="headerlink" href="#manual-way" title="Permanent link">#</a></h3>
<p>Based on this <a href="https://unix.stackexchange.com/questions/382817/uefi-bios-bootable-live-debian-stretch-amd64-with-persistence">stackexchange post</a> and <a href="https://wiki.archlinux.org/title/USB_flash_installation_medium#Using_manual_formatting">Arch Linux Docs</a>.</p>
<ul>
<li>Unmount device:
<div class="highlight"><pre><span></span><code>umount /dev/sdX
</code></pre></div></li>
<li>Create partitions with <code>parted</code>:  <ul>
<li>EFI boot partition,</li>
<li>ISO partition with <code>legacy_boot</code> flag.
<div class="highlight"><pre><span></span><code>parted /dev/sdX --script mktable gpt
parted /dev/sdX --script mkpart EFI fat16 1MiB 10MiB
parted /dev/sdX --script mkpart live fat16 10MiB 3GiB
parted /dev/sdX --script mkpart persistence ext4 3GiB 100%
parted /dev/sdX --script set 1 msftdata on
parted /dev/sdX --script set 2 legacy_boot on
parted /dev/sdX --script set 2 msftdata on
</code></pre></div></li>
</ul>
</li>
<li>Create filesystems - FAT for EFI and live, ext4 for persistence:
<div class="highlight"><pre><span></span><code>mkfs.vfat -n EFI /dev/sdX1
mkfs.vfat -n LIVE /dev/sdX2
mkfs.ext4 -F -L persistence /dev/sdX3
</code></pre></div></li>
<li>Mount the resources:
<div class="highlight"><pre><span></span><code>mkdir /tmp/usb-efi /tmp/usb-live /tmp/usb-persistence /tmp/live-iso

mount /dev/sdX1 /tmp/usb-efi
mount /dev/sdX2 /tmp/usb-live
mount /dev/sdX3 /tmp/usb-persistence
mount -oro live_img_name.iso /tmp/live-iso
</code></pre></div></li>
<li>Install live system:
<div class="highlight"><pre><span></span><code>cp -ar /tmp/live-iso/* /tmp/usb-live
</code></pre></div></li>
<li><a href="#add-persistence">Add persistence</a>. </li>
<li>Grub for <a href="https://www.wisecleaner.com/think-tank/310-What-is-UEFI.html">UEFI</a> support:
<div class="highlight"><pre><span></span><code>apt-get install grub2 grub-efi-amd64-bin
grub-install --no-uefi-secure-boot --removable --target=x86_64-efi --boot-directory=/tmp/usb-live/boot/ --efi-directory=/tmp/usb-efi /dev/sdX
</code></pre></div></li>
<li>Syslinux for legacy BIOS support (<a href="https://wiki.archlinux.org/title/Syslinux#Installation_on_BIOS">wiki.archlinux</a>):
<div class="highlight"><pre><span></span><code>apt-get install syslinux mtools
dd bs=440 count=1 conv=notrunc if=/usr/lib/syslinux/mbr/gptmbr.bin of=/dev/sdX
syslinux --install /dev/sdX2
</code></pre></div></li>
<li>Reuse the <code>isolinux config</code> of original live ISO: 
<div class="highlight"><pre><span></span><code>mkdir /tmp/usb-live/syslinux
mv /tmp/usb-live/isolinux/* /tmp/usb-live/syslinux
mv /tmp/usb-live/syslinux/isolinux.bin /tmp/usb-live/syslinux/syslinux.bin
mv /tmp/usb-live/syslinux/isolinux.cfg /tmp/usb-live/syslinux/syslinux.cfg
</code></pre></div></li>
<li>Modify Kernel parameters with <a href="https://www.unix.com/man-page/Linux/1/sed/">sed</a>:  <ul>
<li>Add the <code>persistence</code> kernel parameter to <code>menu.cfg</code> and <code>grub.cfg</code>.</li>
<li>Set the <code>keyboard-layout</code> kernel parameter.</li>
<li>Fix the grub splash image (optional).
<div class="highlight"><pre><span></span><code>sed --in-place &#39;0,/boot=live/{s/\(boot=live ,*\)$/\1 persistence/}&#39; /tmp/usb-live/boot/grub/grub.cfg /tmp/usb-live/syslinux/menu.cfg

sed --in-place &#39;0,/boot=live/{s/\(boot=live ,*\)$/\1 keyboard-layout=en locales=en_US.UTF-8,ru_RU.UTF-8/}&#39; /tmp/usb-live/boot/grub/grub.cfg /tmp/usb-live/syslinux/menu.cfg

sed --in-place &#39;s#isolinux/splash#syslinux/splash#&#39; /tmp/usb-live/boot/grub/grub.cfg
</code></pre></div></li>
</ul>
</li>
<li>Unmount and cleanup:
<div class="highlight"><pre><span></span><code>umount /tmp/usb-efi /tmp/usb-live /tmp/usb-persistence /tmp/live-iso
rmdir /tmp/usb-efi /tmp/usb-live /tmp/usb-persistence /tmp/live-iso
</code></pre></div></li>
</ul>
<h3 id="why-this-should-work-for-both-uefi-and-bios">Why this should work for both UEFI and BIOS<a class="headerlink" href="#why-this-should-work-for-both-uefi-and-bios" title="Permanent link">#</a></h3>
<blockquote>
<p>When starting in UEFI mode, the PC will scan the FAT partitions we defined in the GPT partition table. The first FAT partition carries the UEFI grub bootloader, which is found because it is located in the path specified by UEFI for removable drives (the --removable switch to grub-install did this). No UEFI boot entry is necessary for that to work, we only need to make the PC try to boot from the USB drive. That grub is configured to take it from there (load the grub.cfg, show the menu, etc.).  </p>
<p>When starting in BIOS mode and selecting to boot from the USB drive, the PC will execute the gptmbr.bin bootloader code we have written to the protective MBR of the USB drive. That bootloader looks for the GPT partition marked with the legacy_boot flag and chainload syslinux from that partition. Syslinux then takes over (load menu.cfg, show the menu, etc.).</p>
</blockquote>
<h2 id="add-persistence-to-live-usb">Add persistence to Live-usb<a class="headerlink" href="#add-persistence-to-live-usb" title="Permanent link">#</a></h2>
<ul>
<li>Create <code>ext3</code> or <code>ext4</code> file system in the partition and clabel ot <code>persistence</code>:
<div class="highlight"><pre><span></span><code>mkfs.ext3 -L persistence ${usb}3
</code></pre></div></li>
<li>Create mount point, mount partition, create configuration file to enable persistence and unmount partition:
<div class="highlight"><pre><span></span><code>mkdir -p /mnt/usb_sd
mount ${usb}3 /mnt/usb_sd
echo &quot;/ union&quot; | sudo tee /mnt/usb_sd/persistense.conf
umount ${usb}3
</code></pre></div></li>
</ul>
<h2 id="add-persistence-with-luks-encryption-to-live-usb">Add persistence with LUKS encryption to Live-usb<a class="headerlink" href="#add-persistence-with-luks-encryption-to-live-usb" title="Permanent link">#</a></h2>
<ul>
<li>Initialize LUKS encryption on created partition:</li>
</ul>
<p><div class="highlight"><pre><span></span><code>cryptsetup --verbose --verify-passphrase luksFormat ${usb}3
cryptsetup luksOpen ${usb}3 usb_sd
</code></pre></div>
- Create <code>ext3</code> or <code>ext4</code> filesystem and label it <code>persistence</code>:
<div class="highlight"><pre><span></span><code>mkfs.ext3 -L persistence /dev/mapper/usb_sd
e2label /dev/mapper/usb_sd persistence
</code></pre></div>
- Create mount point, mount encrypted partition, set up the <code>persistence.conf</code> and unmount partition:
<div class="highlight"><pre><span></span><code>mkdir -p /mnt/usb_sd/persistense
mount /dev/mapper/usb_sd /mnt/usb_sd
echo &quot;/ union&quot; | sudo tee /mnt/usb_sd/persistence.conf
umount /dev/mapper/usb_sd
</code></pre></div>
- Close the encrypted channel to the partition:
<div class="highlight"><pre><span></span><code>cryptsetup lulksclose /dev/mapper/usb_sd
</code></pre></div></p>
<h2 id="create-new-partition-with-fdisk">Create new partition with <code>fdisk</code> <a name="fdisk-new-partition"></a><a class="headerlink" href="#create-new-partition-with-fdisk" title="Permanent link">#</a></h2>
<ul>
<li>Select storage disk:
<div class="highlight"><pre><span></span><code>fdisk /dev/sdb
</code></pre></div></li>
<li>Create new partition:  <ul>
<li><code>o</code> command to create partition table</li>
<li><code>n</code> command to create new partition</li>
<li>select partition number</li>
<li>start sector: default</li>
<li>partition size: <code>+32GB</code></li>
<li><code>w</code> command to write on disk</li>
</ul>
</li>
<li>Format partition for necessary filesystem:
<div class="highlight"><pre><span></span><code>mkfs -t vfat /dev/sdb3
</code></pre></div></li>
</ul>
<h2 id="troubleshooting">Troubleshooting <a name="troubleshooting"></a><a class="headerlink" href="#troubleshooting" title="Permanent link">#</a></h2>
<ul>
<li>If messed up with partitions - just delete <a href="https://en.wikipedia.org/wiki/Device_file">device file</a>: <code>sudo rm /dev/sdb</code> and re-insert the device - <a href="https://unix.stackexchange.com/questions/349052/dd-command-indicates-not-enough-disk-space-trying-to-format-sd-card-for-raspbe">stackexchange</a>.</li>
<li>Syslinux <a href="https://wiki.archlinux.org/title/Syslinux#Manual_install">manual install</a>.</li>
</ul>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: How To Guides" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              How To Guides
            </div>
          </div>
        </a>
      
      
        
        <a href="../sphinx_to_gh_pages_eng/" class="md-footer__link md-footer__link--next" aria-label="Next: Publish sphinx-generated docs on GitHub Pages" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Publish sphinx-generated docs on GitHub Pages
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      lejbron
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/lejbron" target="_blank" rel="noopener" title="lejbron" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "navigation.top", "header.autohide"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ed9748b7.min.js"></script>
      
    
  </body>
</html>